---
- name: install ripgrep
  apt:
    name: ripgrep
    state: present
  become: true

- name: ensure .claude directory exists
  file:
    path: ~/.claude
    state: directory
    mode: 0755

- name: symlink CLAUDE.md to user config
  file:
    src: "{{ playbook_dir }}/roles/claude/files/CLAUDE.md"
    dest: ~/.claude/CLAUDE.md
    state: link
    force: true

- name: symlink commands directory to user config
  file:
    src: "{{ playbook_dir }}/roles/claude/files/commands"
    dest: ~/.claude/commands
    state: link
    force: true

- name: symlink skills directory to user config
  file:
    src: "{{ playbook_dir }}/roles/claude/files/skills"
    dest: ~/.claude/skills
    state: link
    force: true
